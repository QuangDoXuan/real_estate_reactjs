{"ast":null,"code":"var _jsxFileName = \"/home/quang/code/land-project-react/src/sites/admin/components/account/login.js\";\n//React, redux\nimport React from 'react';\nimport { connect } from 'react-redux'; //UI\n\nimport { toast } from 'react-toastify';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport constants from '../../../../resources/strings'; //provider\n\nimport dataCacheProvider from '../../../../data-access/datacache-provider';\nimport userProvider from '../../../../data-access/user-provider';\nimport './main.css';\nimport './util.css';\nimport axios from 'axios';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      grant_type: 'password' // confirm: ''\n\n    };\n  }\n\n  componentWillMount() {\n    this.checkUserLogin();\n  }\n\n  checkUserLogin() {\n    if (this.props.userApp.currentUser) {\n      this.props.history.push(\"/admin/dashboard\");\n    } else {\n      this.props.history.push(\"/dang-nhap\");\n    }\n  }\n\n  login() {\n    const _this$state = this.state,\n          username = _this$state.username,\n          password = _this$state.password,\n          grant_type = _this$state.grant_type;\n    let body = {\n      email: username,\n      password: password\n    };\n    userProvider.login(body).then(res => {\n      this.props.dispatch({\n        type: constants.action.action_user_login,\n        value: res.user\n      });\n      this.props.dispatch({\n        type: 'SAVE_TOKEN',\n        value: res.token\n      });\n      dataCacheProvider.save(\"\", constants.key.storage.current_account, res.user).then(s => {\n        this.props.history.push(\"/admin/dashboard\");\n      });\n      toast.success('Xin chào ' + res.user.username, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password,\n          confirm = _this$state2.confirm;\n    return React.createElement(\"div\", {\n      class: \"limiter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container-login100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"wrap-login100 p-t-50 p-b-90\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      class: \"login100-form validate-form flex-sb flex-w\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"login100-form-title p-b-51\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      class: \"wrap-input100 validate-input m-b-16\",\n      \"data-validate\": \"Username is required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      value: username,\n      onChange: event => this.setState({\n        username: event.target.value\n      }),\n      class: \"input100\",\n      type: \"text\",\n      name: \"username\",\n      placeholder: \"Username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"focus-input100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"wrap-input100 validate-input m-b-16\",\n      \"data-validate\": \"Password is required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"input100\",\n      type: \"password\",\n      name: \"pass\",\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"focus-input100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"flex-sb-m w-full p-t-3 p-b-24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"contact100-form-checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      class: \"input-checkbox100\",\n      id: \"ckb1\",\n      type: \"checkbox\",\n      name: \"remember-me\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      class: \"label-checkbox100\",\n      for: \"ckb1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Remember me\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      class: \"txt1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Forgot?\"))), React.createElement(\"div\", {\n      class: \"container-login100-form-btn m-t-17\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      class: \"login100-form-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Login\"))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userApp: state.userApp\n  };\n}\n\nexport default connect(mapStateToProps)(Login);","map":{"version":3,"sources":["/home/quang/code/land-project-react/src/sites/admin/components/account/login.js"],"names":["React","connect","toast","ToastContainer","constants","dataCacheProvider","userProvider","axios","Login","Component","constructor","props","state","username","password","grant_type","componentWillMount","checkUserLogin","userApp","currentUser","history","push","login","body","email","then","res","dispatch","type","action","action_user_login","value","user","token","save","key","storage","current_account","s","success","position","POSITION","TOP_RIGHT","catch","e","console","log","render","confirm","event","setState","target","mapStateToProps"],"mappings":";AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB,C,CAEA;;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,OAAO,2CAAP;AACA,OAAOC,SAAP,MAAsB,+BAAtB,C,CAEA;;AACA,OAAOC,iBAAP,MAA8B,4CAA9B;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AAEA,OAAO,YAAP;AACA,OAAO,YAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,KAAN,SAAoBR,KAAK,CAACS,SAA1B,CAAoC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,UAAU,EAAE,UAHH,CAIT;;AAJS,KAAb;AAMH;;AAEDC,EAAAA,kBAAkB,GAAG;AACjB,SAAKC,cAAL;AACH;;AAEDA,EAAAA,cAAc,GAAG;AACb,QAAI,KAAKN,KAAL,CAAWO,OAAX,CAAmBC,WAAvB,EAAoC;AAChC,WAAKR,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,kBAAxB;AACH,KAFD,MAEO;AACH,WAAKV,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACH;AACJ;;AAEDC,EAAAA,KAAK,GAAG;AAAA,wBACuC,KAAKV,KAD5C;AAAA,UACIC,QADJ,eACIA,QADJ;AAAA,UACcC,QADd,eACcA,QADd;AAAA,UACwBC,UADxB,eACwBA,UADxB;AAEJ,QAAIQ,IAAI,GAAG;AACTC,MAAAA,KAAK,EAAEX,QADE;AAETC,MAAAA,QAAQ,EAAEA;AAFD,KAAX;AAIAR,IAAAA,YAAY,CAACgB,KAAb,CAAmBC,IAAnB,EAAyBE,IAAzB,CAA8BC,GAAG,IAAE;AACjC,WAAKf,KAAL,CAAWgB,QAAX,CAAoB;AAAEC,QAAAA,IAAI,EAAExB,SAAS,CAACyB,MAAV,CAAiBC,iBAAzB;AAA4CC,QAAAA,KAAK,EAAEL,GAAG,CAACM;AAAvD,OAApB;AACA,WAAKrB,KAAL,CAAWgB,QAAX,CAAoB;AAAEC,QAAAA,IAAI,EAAE,YAAR;AAAsBG,QAAAA,KAAK,EAAEL,GAAG,CAACO;AAAjC,OAApB;AACA5B,MAAAA,iBAAiB,CAAC6B,IAAlB,CAAuB,EAAvB,EAA2B9B,SAAS,CAAC+B,GAAV,CAAcC,OAAd,CAAsBC,eAAjD,EAAkEX,GAAG,CAACM,IAAtE,EAA4EP,IAA5E,CAAiFa,CAAC,IAAI;AAClF,aAAK3B,KAAL,CAAWS,OAAX,CAAmBC,IAAnB,CAAwB,kBAAxB;AACH,OAFD;AAGAnB,MAAAA,KAAK,CAACqC,OAAN,CAAc,cAAab,GAAG,CAACM,IAAJ,CAASnB,QAApC,EAA8C;AAC1C2B,QAAAA,QAAQ,EAAEtC,KAAK,CAACuC,QAAN,CAAeC;AADiB,OAA9C;AAGD,KATD,EASGC,KATH,CASSC,CAAC,IAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD,KAXD;AAYH;;AAGDG,EAAAA,MAAM,GAAG;AAAA,yBACmC,KAAKnC,KADxC;AAAA,UACGC,QADH,gBACGA,QADH;AAAA,UACaC,QADb,gBACaA,QADb;AAAA,UACuBkC,OADvB,gBACuBA,OADvB;AAEL,WACE;AAAK,MAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,oBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,6BAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,KAAK,EAAC,4CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,KAAK,EAAC,4BAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAME;AAAK,MAAA,KAAK,EAAC,qCAAX;AAAiD,uBAAgB,sBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,KAAK,EAAInC,QAAhB;AAA0B,MAAA,QAAQ,EAAGoC,KAAD,IAAS,KAAKC,QAAL,CAAc;AAACrC,QAAAA,QAAQ,EAAEoC,KAAK,CAACE,MAAN,CAAapB;AAAxB,OAAd,CAA7C;AAA4F,MAAA,KAAK,EAAC,UAAlG;AAA6G,MAAA,IAAI,EAAC,MAAlH;AAAyH,MAAA,IAAI,EAAC,UAA9H;AAAyI,MAAA,WAAW,EAAC,UAArJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAM,MAAA,KAAK,EAAC,gBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CANF,EAYE;AAAK,MAAA,KAAK,EAAC,qCAAX;AAAiD,uBAAgB,sBAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,KAAK,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,UAA7B;AAAwC,MAAA,IAAI,EAAC,MAA7C;AAAoD,MAAA,WAAW,EAAC,UAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAM,MAAA,KAAK,EAAC,gBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAZF,EAiBE;AAAK,MAAA,KAAK,EAAC,+BAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,0BAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,KAAK,EAAC,mBAAb;AAAiC,MAAA,EAAE,EAAC,MAApC;AAA2C,MAAA,IAAI,EAAC,UAAhD;AAA2D,MAAA,IAAI,EAAC,aAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAO,MAAA,KAAK,EAAC,mBAAb;AAAiC,MAAA,GAAG,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,CADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAY,MAAA,KAAK,EAAC,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CARF,CAjBF,EAgCE;AAAK,MAAA,KAAK,EAAC,oCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,KAAK,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CAhCF,CADF,CADF,CADF,CADF;AA+CH;;AA7F+B;;AAgGpC,SAASqB,eAAT,CAAyBxC,KAAzB,EAAgC;AAC5B,SAAO;AACHM,IAAAA,OAAO,EAAEN,KAAK,CAACM;AADZ,GAAP;AAGH;;AACD,eAAejB,OAAO,CAACmD,eAAD,CAAP,CAAyB5C,KAAzB,CAAf","sourcesContent":["//React, redux\nimport React from 'react'\nimport { connect } from 'react-redux';\n\n//UI\nimport { toast } from 'react-toastify';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport constants from '../../../../resources/strings'\n\n//provider\nimport dataCacheProvider from '../../../../data-access/datacache-provider'\nimport userProvider from '../../../../data-access/user-provider'\n\nimport './main.css'\nimport './util.css' \nimport axios from 'axios';\n\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            grant_type: 'password'\n            // confirm: ''\n        }\n    }\n\n    componentWillMount() {\n        this.checkUserLogin()\n    }\n\n    checkUserLogin() {\n        if (this.props.userApp.currentUser) {\n            this.props.history.push(\"/admin/dashboard\");\n        } else {\n            this.props.history.push(\"/dang-nhap\");\n        }\n    }\n\n    login() {\n        const { username, password, grant_type } = this.state;\n        let body = {\n          email: username,\n          password: password\n        }\n        userProvider.login(body).then(res=>{\n          this.props.dispatch({ type: constants.action.action_user_login, value: res.user })\n          this.props.dispatch({ type: 'SAVE_TOKEN', value: res.token })\n          dataCacheProvider.save(\"\", constants.key.storage.current_account, res.user).then(s => {\n              this.props.history.push(\"/admin/dashboard\");\n          });\n          toast.success('Xin chào '+ res.user.username, {\n              position: toast.POSITION.TOP_RIGHT\n          });\n        }).catch(e=>{\n          console.log(e)\n        })\n    }\n\n\n    render() {\n        const { username, password, confirm } = this.state;\n        return (\n          <div class=\"limiter\">\n            <div class=\"container-login100\">\n              <div class=\"wrap-login100 p-t-50 p-b-90\">\n                <form class=\"login100-form validate-form flex-sb flex-w\">\n                  <span class=\"login100-form-title p-b-51\">\n                    Login\n                  </span>\n\n                  \n                  <div class=\"wrap-input100 validate-input m-b-16\" data-validate = \"Username is required\">\n                    <input value = {username} onChange={(event)=>this.setState({username: event.target.value})} class=\"input100\" type=\"text\" name=\"username\" placeholder=\"Username\"/>\n                    <span class=\"focus-input100\"></span>\n                  </div>\n                  \n                  \n                  <div class=\"wrap-input100 validate-input m-b-16\" data-validate = \"Password is required\">\n                    <input class=\"input100\" type=\"password\" name=\"pass\" placeholder=\"Password\"/>\n                    <span class=\"focus-input100\"></span>\n                  </div>\n                  \n                  <div class=\"flex-sb-m w-full p-t-3 p-b-24\">\n                    <div class=\"contact100-form-checkbox\">\n                      <input class=\"input-checkbox100\" id=\"ckb1\" type=\"checkbox\" name=\"remember-me\"/>\n                      <label class=\"label-checkbox100\" for=\"ckb1\">\n                        Remember me\n                      </label>\n                    </div>\n\n                    <div>\n                      <a href=\"#\" class=\"txt1\">\n                        Forgot?\n                      </a>\n                    </div>\n                  </div>\n\n                  <div class=\"container-login100-form-btn m-t-17\">\n                    <button class=\"login100-form-btn\">\n                      Login\n                    </button>\n                  </div>\n\n                </form>\n              </div>\n            </div>\n          </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        userApp: state.userApp\n    };\n}\nexport default connect(mapStateToProps)(Login);"]},"metadata":{},"sourceType":"module"}